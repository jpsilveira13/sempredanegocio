function mascaraCampo(b,a){v_obj=b;v_fun=a;setTimeout("executaMascaraCampo()",1)}function executaMascaraCampo(){v_obj.value=v_fun(v_obj.value)}function leech(a){a=a.replace(/o/gi,"0");a=a.replace(/i/gi,"1");a=a.replace(/z/gi,"2");a=a.replace(/e/gi,"3");a=a.replace(/a/gi,"4");a=a.replace(/s/gi,"5");a=a.replace(/t/gi,"7");return a}function mascSoNumeros(a){return a.replace(/\D/g,"")}function mtel(a){a=a.replace(/\D/g,"");a=a.replace(/^(\d{2})(\d)/g,"($1) $2");a=a.replace(/(\d)(\d{4})$/,"$1-$2");return a}function mascTelefoneDDD2(a){a=a.replace(/\D/g,"");a=a.replace(/^(\d\d)(\d)/g,"($1) $2");a=a.replace(/(\d{4})(\d)/,"$1-$2");return a}function mascTelefoneDDD3(a){a=a.replace(/\D/g,"");a=a.replace(/^(\d\d\d)(\d)/g,"($1) $2");a=a.replace(/(\d{4})(\d)/,"$1-$2");return a}function mascTelefone(a){a=a.replace(/\D/g,"");a=a.replace(/^(\d{2})(\d)/g,"($1) $2");a=a.replace(/(\d)(\d{4})$/,"$1-$2");return a}function mascCPF(a){a=a.replace(/\D/g,"");a=a.replace(/(\d{3})(\d)/,"$1.$2");a=a.replace(/(\d{3})(\d)/,"$1.$2");a=a.replace(/(\d{3})(\d{1,2})$/,"$1-$2");return a}function mascCEP(a){a=a.replace(/D/g,"");a=a.replace(/^(\d{5})(\d)/,"$1-$2");return a}function mascCNPJ(a){a=a.replace(/\D/g,"");a=a.replace(/^(\d{2})(\d)/,"$1.$2");a=a.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3");a=a.replace(/\.(\d{3})(\d)/,".$1/$2");a=a.replace(/(\d{4})(\d)/,"$1-$2");return a}function mascData(a){a=a.replace(/\D/g,"");a=a.replace(/(\d{2})(\d)/,"$1/$2");a=a.replace(/(\d{2})(\d)/,"$1/$2");return a}function mvalor(a){a=a.replace(/\D/g,"");a=a.replace(/(\d)(\d{8})$/,"$1.$2");a=a.replace(/(\d)(\d{5})$/,"$1.$2");a=a.replace(/(\d)(\d{2})$/,"$1,$2");return a}function mvalor2(a){a=a.replace(/[^1234567890],./g,"");return a}function mascValorPonto(a){a=a.replace(/[^1234567890.,]/g,"");a=a.replace(/,/,".");return a}function mascValorVirgula(a){a=a.replace(/[^1234567890.,]/g,"");a=a.replace(/\./,",");return a}function mascValorDoisDecimais(a){a=(mascSoNumeros(a));if(a.length>2){var b=Number(a);b=(b/100);return b.toFixed(2)}else{return a}}$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});$(window).scroll(function(){var d=$("#toTop");if($(window).scrollTop()>700){d.removeClass("hide")}else{d.addClass("hide")}});$("#toTop").click(function(d){d.preventDefault();$("html, body").animate({scrollTop:0},1000)});$(".dropdown-toggle").dropdown();$("#denunciaForm").submit(function(h){h.preventDefault();var g=$("#denunciaForm");var d=$(this),j=d.serialize(),f="/form-denuncia";var e=$.post(f,{formData:j});e.done(function(k){if(k.fail){$.each(k.errors,function(l,m){$(".text-error").show("fast")});$("#successMessage").empty()}if(k.success){g.empty();$(".text").empty();$(".modal-footer").hide();$(".tab-content>.tab-pane").css("display","block")}})});$("#emailAmigo").submit(function(h){var g=$("#emailAmigo");h.preventDefault();var d=$(this),j=d.serialize(),f="/form-amigo";var e=$.post(f,{formData:j});e.done(function(k){if(k.fail){$.each(k.errors,function(l,m){$("text-error").show("fast")});$("#successMessage").empty()}if(k.success){g.empty();$(".hide-body").empty();$("#divSucessoAmigo").css("display","block")}})});$("#emailAnuncio").submit(function(g){var j=$("#emailAnuncio");g.preventDefault();var d=$(this),h=d.serialize(),f="/form-anuncio";var e=$.post(f,{formData:h});e.done(function(k){if(k.fail){console.log(k.fail);console.log("errou");$.each(k.errors,function(l,m){$("text-error").show("fast")});$("#successMessage").empty()}if(k.success){j.empty();$("#divSucessoAnuncio").css("display","block")}})});(function(e){e.fn.countTo=function(f){f=f||{};return e(this).each(function(){var h=e.extend({},e.fn.countTo.defaults,{from:e(this).data("from"),to:e(this).data("to"),speed:e(this).data("speed"),refreshInterval:e(this).data("refresh-interval"),decimals:e(this).data("decimals")},f);var n=Math.ceil(h.speed/h.refreshInterval),o=(h.to-h.from)/n;var p=this,l=e(this),k=0,m=h.from,j=l.data("countTo")||{};l.data("countTo",j);if(j.interval){clearInterval(j.interval)}j.interval=setInterval(q,h.refreshInterval);g(m);function q(){m+=o;k++;g(m);if(typeof(h.onUpdate)=="function"){h.onUpdate.call(p,m)}if(k>=n){l.removeData("countTo");clearInterval(j.interval);m=h.to;if(typeof(h.onComplete)=="function"){h.onComplete.call(p,m)}}}function g(s){var r=h.formatter.call(p,s,h);l.text(r)}})};e.fn.countTo.defaults={from:0,to:0,speed:1000,refreshInterval:100,decimals:0,formatter:d,onUpdate:null,onComplete:null};function d(g,f){return g.toFixed(f.decimals)}}(jQuery));$("img.lazy").lazyload({effect:"fadeIn"});var a;$("#photos").on("change",function(d){return a(this)});this.readURL=function(e){var d;if(e.files&&e.files[0]){d=new FileReader();d.onload=function(g){var f;$(".image_to_upload").attr("src",g.target.result);f=$(".preview");if(f.hasClass("hide")){return f.toggleClass("hide")}};return d.readAsDataURL(e.files[0])}};a=function(f){var h,g,e,d,j;if(f.files&&f.files[0]){j=f.files;for(g=0,e=j.length;g<e;g++){h=j[g];d=new FileReader();d.onload=function(l){var k;k='<li class=\'ai_image\'><div class=\'image-anuncio\'><span></span><img width="80" height="38" src="'+l.target.result+"\"></div><div class='bts'><a href='javascript:void(0)' class='bt-delete' title='excluir'></a><a href='javascript:void(0)' class='bt-rotate' title='rotate'></a></div></li>";var m=$("#photos_clearing li").length;if(m>24){alert("Número de upload no máximo 4");return false}else{$("#photos_clearing").append(k)}};d.readAsDataURL(h)}window.post_files=f.files;if(window.post_files!==void 0){return f.files=$.merge(window.post_files,f.files)}}};$(".bt-rotate").click(function(){alert("teste")});$("#carrouselImovel").carousel({interval:4000});$("[id^=carousel-selector-]").click(function(){var d=$(this).attr("id");var e=d.substr(d.length-1);e=parseInt(e);$("#carrouselImovel").carousel(e);$("[id^=carousel-selector-]").removeClass("selected");$(this).addClass("selected")});$("#carrouselImovel").on("slid",function(d){var f=$(".item.active").data("slide-number");f=parseInt(f);$("[id^=carousel-selector-]").removeClass("selected");$("[id=carousel-selector-"+f+"]").addClass("selected")});(function(g,j,l){var f={center:true,backgroundControl:false};var e={$carouselContainer:j(".thumbnails-carousel").parent(),$thumbnailsLi:j(".thumbnails-carousel li"),$controls:j(".thumbnails-carousel").parent().find(".carousel-control")};function k(){e.$carouselContainer.find("ol.carousel-indicators").addClass("indicators-fix");e.$thumbnailsLi.first().addClass("active-thumbnail");if(!f.backgroundControl){e.$carouselContainer.find(".carousel-control").addClass("controls-background-reset")}else{e.$controls.height(e.$carouselContainer.find(".carousel-inner").height())}if(f.center){e.$thumbnailsLi.wrapAll("<div class='center clearfix'></div>")}}function d(m){e.$thumbnailsLi.removeClass("active-thumbnail");e.$thumbnailsLi.eq(j(m).index()).addClass("active-thumbnail")}function h(){e.$carouselContainer.on("slide.bs.carousel",function(m){d(m.relatedTarget)});e.$thumbnailsLi.click(function(){e.$carouselContainer.carousel(j(this).index())})}j.fn.thumbnailsCarousel=function(m){f=j.extend(f,m);k();h();return this}})(window,jQuery);$("#category_id").on("change",function(d){var f=d.target.value;$("#propriedade1").empty();$("#listCaract").empty();$("#divVeiculo").removeClass("show").addClass("hide");$("#divSubCategory").show("fast");$("#divAdvertSubcategory").hide("fast");$.get("/ajax-subcat?cat_id="+f,function(e){$("#subcategory").empty();$("#subcategory").append('<option value="" >Seleciona uma opção...</option>');$.each(e,function(g,h){$("#subcategory").append('<option value="'+h.id+'" id="'+h.id+'" >'+h.name+"</option>")})})});$("#subcategory").on("change",function(f){var d=f.target.value;if(d<5){console.log(d);$("#veiculos").empty();$("#divVeiculo").addClass("show");$("#divAdvertSubcategory").hide("fast");$.ajax({type:"GET",url:"get-marcatotal",data:"marca",async:false,cache:false,beforeSend:function(){$("#veiculos").append('<option value="" selected="selected">Selecione uma opção...</option>')},success:function(e){if(e.length>0){for(i=0;i<e.length;i++){$("#veiculos").append("<option value="+e[i].codigo_marca+">"+e[i].marca+"</option>")}}else{$("#veiculos").append("<option value=''>Nada foi encontrado</option>")}},error:function(){}})}else{$("#divAdvertSubcategory").hide("fast");$.get("/ajax-advcat?adv_id="+d,function(l){var g=$("#listCaract");var k='<div class="btn-group" data-toggle="buttons">';for(var h=0,e=l.length;h<e;h++){k+='<label class="btn btn-default btcaract mt10" style="width: 204px;margin-left: 47px;"><input type="checkbox" aria-required="false" class="material_checkbox" name="caracteristicas[]" value="'+l[h].id+'">'+l[h].name+"</label>"}k+="</div>";g.html(k)})}});$("#veiculos").on("change",function(f){var d=$(this).find("option:selected").attr("id");$("#modelo").empty();$("#tipo").hide("fast");$.get("/get-marca?marca_id="+d,function(e){$.each(e,function(g,h){$("#modelo").append('<option value="'+h.codigo_modelo+'" >'+h.modelo+"</option>")})})});$("#modelo").on("change",function(f){var d=f.target.value;console.log(d);$("#tipo").empty();$.get("/get-modelo?modelo_id="+d,function(e){$.each(e,function(g,h){$("#tipo").append('<option value="'+h.ano+'" >'+h.ano+"</option>")});$("#tipo").show("fast")})});$("#cep").blur(function(){$.ajax({url:"consultar_cep",type:"GET",data:"cep="+$("#cep").val(),dataType:"json",success:function(d){if(d.sucesso==1){$("#rua").val(d.rua);$("#bairro").val(d.bairro);$("#cidade").val(d.cidade);$("#estado").val(d.estado);$("#numero").focus();$(".localizacao").removeClass("hide").addClass("shows")}if(d.sucesso==2){$("#rua").val("").removeAttr("disabled").focus();$("#bairro").val("").removeAttr("disabled");$("#cidade").val(d.cidade);$("#estado").val(d.estado);$(".localizacao").removeClass("hide").addClass("shows")}}});return false});$("#location").on("keyup",function(g){var d=4;var f=$("#location").val();var h=$("#listaCidades");if(f.length==0){$("#bairro").val("");$("#bairro").attr("readonly",true)}if(f.length>=d){h.show("fast");$.get("/search-cidade/"+this.value,function(e){$("#listaCidades").html("");$.each(e,function(j,k){$("#listaCidades").append('<li><a value="'+k.nome+'">'+k.nome+" - "+k.uf+"</a></li>");$("#listaCidades li a").on("click",function(){var m=$("#location");var l=$(this).attr("value");m.val(l);m.attr("value",l);m.focus()})})});if(h.is(":visible")){$("body").on("click",function(){h.fadeOut()})}}else{h.hide();h.html("")}});$("#bairro").on("keyup",function(h){var d=4;var f=$("#bairro").val();var g=$("#listaBairros");if(f.length>=d){g.show("fast");$.get("/search-bairro/"+this.value,function(e){console.log(e);$("#listaBairros").html("");$.each(e,function(j,k){console.log(k);$("#listaBairros").append('<li><a value="'+k.bairro+'">'+k.bairro+"</a></li>");$("#listaBairros li a").on("click",function(){var m=$("#bairro");var l=$(this).attr("value");m.val(l);m.attr("value",l);m.focus()})})});if(g.is(":visible")){$("body").on("click",function(){g.fadeOut()})}}else{g.hide();g.html("")}});var c=$("#btn-pesquisa");var b=$("#nav-lateral");c.click(function(){b.addClass("na-lef-pos")});$("#btn-close-nav").on("click",function(){b.removeClass("na-lef-pos")});$(function(){var d=$(".propaganda");$(window).scroll(function(){if($(this).scrollTop()>1000){d.css({position:"fixed",top:"80px",width:"195px","z-index":"9999"})}else{d.css({position:"relative",top:"auto"})}})});lightbox.option({resizeDuration:200,wrapAround:true});$(window).scroll(function(){if($(this).scrollTop()>300){$("#btAnuncie").fadeIn()}else{$("#btAnuncie").fadeOut()}});$(window).scroll(function(){if($(this).scrollTop()>300){$(".item-count").countTo({formatter:function(e,d){return e.toFixed(d.decimals)},onUpdate:function(d){console.debug(this)},onComplete:function(d){console.debug(this)}})}});$("#list").click(function(d){d.preventDefault();$("#products .item").addClass("list-group-item").removeClass("bloco-item");$("#products .list-infos").addClass("list-item-nav");$("#products .list-infos").addClass("list-item-nav2")});$("#grid").click(function(d){d.preventDefault();$("#products .item").removeClass("list-group-item");$("#products .list-infos").removeClass("list-item-nav");$("#products .list-infos").removeClass("list-item-nav2");$("#products .item").addClass("grid-group-item, bloco-item")});$("#tooltip-config li").tooltip({placement:"top"});$("#liTelefone").click(function(){$("#phone").removeClass("hide").addClass("show")});$("#images").change(function(j){var h=j.target.files;for(var g=0;g<=h.length;g++){if(g==h.length){setTimeout(function(){reorderImages()},100);break}var f=h[g];var d=new FileReader();d.onload=(function(e){return function(k){$("#sortable").prepend('<li class="ui-state-default" data-order=0 data-id="'+e.lastModified+'"><img src="'+k.target.result+'" style="width:100%;" /> <div class="order-number">0</div></li>')}})(f);d.readAsDataURL(f)}});$("#propriedade1").empty();$("#subcategory").livequery(function(){var f=[10,20,60,70,80,107,108,112,113,105,107];var d=[90,50,40];var h=[1,2,3];var e=f.indexOf(50);var g=d.indexOf(50);console.log(e);console.log(g);$(this).on("change",function(k){var j=k.target.value;$("#propriedade1").empty();if(j==10||j==20||j==60||j==70||j==80||j==107||j==108||j==112||j==113||j==105||j==107){console.log("entrou primeiro if");$('<div class="row"><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"> <label>Número de quartos *</label> <select class="form-control" required data-error="Seleciona uma opção" required="required" name="numero_quarto"> <option value="">Escolher</option><option value="0">Nenhum</option><option value="1">1</option><option value="2">2</option><option value="3">3</option> <option value="4">4</option> <option value="5">5 ou mais</option></select><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div> </div><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"><label>Vagas de garagem *</label> <select required data-error="Seleciona uma opção" required="required" class="form-control" name="numero_garagem"> <option value="">Escolher</option><option value="0">Nenhum</option><option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option><option value="5">5 ou mais</option> </select> <span class="form-control-feedback" aria-hidden="true"></span> <div class="help-block with-errors"></div> </div> </div> <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"> <label>Quantos Banheiros *</label> <select required data-error="Seleciona uma opção" class="form-control" name="numero_banheiro"> <option value="">Escolher</option><option value="0">Nenhum</option> <option value="1">1</option><option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5 ou mais</option></select> <span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div></div><div class="row"><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"> <div class="form-group has-feedback"> <label>Área Construída: *</label> <div class="input-group"> <input class="form-control" onkeypress="mascaraCampo(this, mascSoNumeros)" maxlength="7" required placeholder="Ex.: 150" type="text" data-error="Campo não pode ser vazio"  name="area_construida"><div class="input-group-addon">m²</div></div><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"><label>Condomínio: *</label><div class="input-group"><div class="input-group-addon">R$</div><input class="form-control" maxlength="10" onkeypress="mascaraCampo(this,mvalor)"  data-error="Campo não pode ser vazio" placeholder="Ex.: 150" type="text"  name="valor_condominio" id="valor_condominio"></div><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"><label>IPTU: *</label><div class="input-group"><div class="input-group-addon">R$</div><input  class="form-control" maxlength="7" onkeypress="mascaraCampo(this,mvalor)" data-error="Campo não pode ser vazio" placeholder="Ex.: 150" type="text"  name="valor_iptu" id="valor_iptu"></div><span class="form-control-feedback" aria-hidden="true"></span> <div class="help-block with-errors"></div></div></div></div>').appendTo("#propriedade1")}else{if(j==30){$('<div class="row"><div class="col-md-3 col-lg-3 col-sm-6 col-xs-12"><div class="form-group has-feedback"><label>Vagas de garagem *</label> <select required data-error="Seleciona uma opção" required="required" class="form-control" name="numero_garagem"> <option value="">Escolher</option><option value="0">Nenhum</option><option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option><option value="5">5 ou mais</option> </select> <span class="form-control-feedback" aria-hidden="true"></span> <div class="help-block with-errors"></div> </div> </div><div class="col-md-3 col-lg-3 col-sm-6 col-xs-12"> <div class="form-group has-feedback"> <label>Área Construída: *</label> <div class="input-group"> <input class="form-control" onkeypress="mascaraCampo(this, mascSoNumeros)" maxlength="7" required placeholder="Ex.: 150" type="text" data-error="Campo não pode ser vazio"  name="area_construida"><div class="input-group-addon">m²</div></div><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div><div class="col-md-3 col-lg-3 col-sm-6 col-xs-12"><div class="form-group has-feedback"><label>Condomínio: *</label><div class="input-group"><div class="input-group-addon">R$</div><input class="form-control" maxlength="10" onkeypress="mascaraCampo(this,mvalor)"  data-error="Campo não pode ser vazio" placeholder="Ex.: 150" type="text"  name="valor_condominio" id="valor_condominio"></div><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div><div class="col-md-3 col-lg-3 col-sm-6 col-xs-12"><div class="form-group has-feedback"><label>IPTU: *</label><div class="input-group"><div class="input-group-addon">R$</div><input class="form-control" maxlength="7" onkeypress="mascaraCampo(this,mvalor)" data-error="Campo não pode ser vazio" placeholder="Ex.: 150" type="text" id="valor_iptu" name="valor_iptu"></div><span class="form-control-feedback" aria-hidden="true"></span> <div class="help-block with-errors"></div></div></div></div>').appendTo("#propriedade1")}else{if(j==90||j==50||j==40){console.log("entrou segundo if");$('<div class="row"><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"> <label>Número de quartos *</label> <select class="form-control" required data-error="Seleciona uma opção" required="required" name="numero_quarto"> <option value="">Escolher</option><option value="0">Nenhum</option><option value="1">1</option><option value="2">2</option><option value="3">3</option> <option value="4">4</option> <option value="5">5 ou mais</option></select><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div> </div><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"><label>Vagas de garagem *</label> <select required data-error="Seleciona uma opção" required="required" class="form-control" name="numero_garagem"> <option value="">Escolher</option><option value="0">Nenhum</option><option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option><option value="5">5 ou mais</option> </select> <span class="form-control-feedback" aria-hidden="true"></span> <div class="help-block with-errors"></div> </div> </div> <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"><div class="form-group has-feedback"> <label>Banheiros *</label> <select required data-error="Seleciona uma opção" class="form-control" name="numero_banheiro"> <option value="">Escolher</option><option value="0">Nenhum</option> <option value="1">1</option><option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5 ou mais</option></select> <span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div></div><div class="row"><div class="col-md-4 col-lg-4 col-sm-6 col-xs-12"> <div class="form-group has-feedback"> <label>Acomodações: *</label> <div class="input-group"> <input class="form-control" onkeypress="mascaraCampo(this, mascSoNumeros)" maxlength="2" required placeholder="Ex.: 99" type="text" data-error="Campo não pode ser vazio"  name="acomodacoes"></div><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div><div class="col-md-3 col-lg-3 col-sm-6 col-xs-12"> <div class="form-group has-feedback"> <label>Área Construída: *</label> <div class="input-group"> <input class="form-control" onkeypress="mascaraCampo(this, mascSoNumeros)" maxlength="7" required placeholder="Ex.: 150" type="text" data-error="Campo não pode ser vazio"  name="area_construida"><div class="input-group-addon">m²</div></div><span class="form-control-feedback" aria-hidden="true"></span><div class="help-block with-errors"></div></div></div></div>').appendTo("#propriedade1")}}}})})});